// ==UserScript==
// @name         Tampermonkey Scratch Kod Paneli
// @namespace    http://tampermonkey.net/
// @version      56.0
// @description  KullanÄ±cÄ± bilgileri iÃ§in Scratch veri menÃ¼sÃ¼nÃ¼ gÃ¶sterir.
// @author       games-coder
// @match        https://scratch.mit.edu/*
// @icon         https://media.discordapp.net/attachments/1098949360861069352/1129000348686766170/userlmn_7d0ebcb9330827b3b93376432d9b81a1.png
// @grant        GM_addStyle
// ==/UserScript==

(function () {
    'use strict';

    var isDragging = false;
    var startWidth, startHeight;
    var startOffsetX, startOffsetY;

    GM_addStyle(`
    @import url('https://fonts.googleapis.com/css2?family=FONTISMI&display=swap');

    body {
        font-family: 'FONTISMI', sans-serif;
        background-color: #111; /* KaranlÄ±k tema rengi */
    }
    #scratch-menu {
        border-radius: 15px;
        background-color: rgba(0, 0, 0, 0.80); /* %15 blurlu arka plan */
        backdrop-filter: blur(15px); /* %15 blurlu arka plan */
        color: white;
        box-shadow: 0 0 15px rgba(0, 0, 0, 1.5);
        border: 2px solid white; /* Beyaz kenarlÄ±k */
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 1000px;
        height: 600px;
        z-index: 9999;
        display: none;
    }
    #scratch-menu-header {
        border-radius: 15px 15px 0 0;
        background-color: #131313; /* MenÃ¼ baÅŸlÄ±k rengi */
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        cursor: move;
    }
    #scratch-menu-header span {
        display: flex;
        align-items: center;
    }
    #scratch-menu-header img {
        width: 25px;
        height: 25px;
        margin-right: 10px;
    }
    #font-selector {
        display: flex;
        align-items: center;
    }
    #font-selector select {
        margin-right: 10px;
    }
    #scratch-data img {
        border-radius: 8px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }
    #scratch-data li, #scratch-data p {
        font-size: 18px;
    }
    .data-container {
        display: flex;
        align-items: center;
        margin: 10px 0;
    }
    .data-label {
        font-weight: bold;
        margin-right: 10px;
    }
    .data-value {
        margin-right: 15px;
    }
    #scratch-input, #scratch-combo, #scratch-search-btn {
        background-color: black; /* YazÄ± yazma alanÄ± (Combo box) ve "Search" butonunun arka planÄ± siyah */
        border: 2px solid white;
    }
    #scratch-search-btn {
        background-color: black; /* "Search" butonunun arka planÄ±nÄ± siyah yap */
        border: 2px solid white;
    }
`);

var menuHtml = `
<div id="scratch-menu">
    <div id="scratch-menu-header">
        <span>
            <img src="https://static.scratchstats.com/img/icon.456189d.png" alt="Logo">
            <span style="margin-right: 10px;">Scratch Data Panel</span>
        </span>
        <div id="scratch-menu-controls" style="display: flex;">
            <div id="scratch-menu-minimize" style="cursor: pointer; margin-right: 10px; font-size: 24px;"></div>
            <div id="scratch-menu-restore" style="cursor: pointer; margin-right: 10px; font-size: 24px; display: none;"></div>
            <div id="scratch-menu-close" style="cursor: pointer; font-size: 24px; color: Red;">Ã—</div>
        </div>
    </div>
    <input id="scratch-input" type="text" placeholder="ğŸ” Enter the username." style="width: 46%; margin: 15px; padding: 10px; border: 2px solid white; border-radius: 8px; box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);">
   <select id="scratch-combo" style="margin: 15px; padding: 10px; border-radius: 8px; border: none; border: 2px solid white; box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);">
    <option value="userinfo">ğŸ‘¤ User Info</option>
    <option value="followers">ğŸ‘¥ Followers</option>
    <option value="following">â¡ï¸ Following</option>
    <option value="comments">ğŸ“° Profile Comments</option>
    <option value="activity">ğŸï¸ User Activities</option>
    <option value="projects">ğŸ® Projects</option>
    <option value="favorites">â­ Favorite Projects</option>
    <option value="search">ğŸ” Popular Search Results</option>
    <option value="search2">ğŸ” Trending Search Results</option>
    <option value="studios">ğŸ­ Studios</option>
    <option value="forum">ğŸŸï¸ Scratch Forum</option>
    <option value="news">ğŸ“° Scratch News</option>
    <option value="explore">ğŸŒ Explore Scratch</option>
</select>
    <button id="scratch-search-btn" style="margin: 15px; padding: 10px 20px; background-color: black; color: white; border-radius: 8px; border: 2px solid white; cursor: pointer; box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);">Search</button>
    <div id="scratch-data" style="overflow-y: scroll; height: 440px; padding: 15px;"></div>
</div>
`;
document.body.insertAdjacentHTML('beforeend', menuHtml);


// MenÃ¼yÃ¼ aÃ§ma iÅŸlevi
function openMenu() {
    document.getElementById('scratch-menu').style.display = 'block';
}

// MenÃ¼yÃ¼ kapatma iÅŸlevi
function closeMenu() {
    document.getElementById('scratch-menu').style.display = 'none';
}

// MenÃ¼yÃ¼ kÃ¼Ã§Ã¼ltme iÅŸlevi
function minimizeMenu() {
    document.getElementById('scratch-menu').style.height = '30px';
    document.getElementById('scratch-menu-header').style.borderRadius = '10px';
    document.getElementById('scratch-menu-restore').style.display = 'inline-block';
    document.getElementById('scratch-menu-minimize').style.display = 'none';
}

// MenÃ¼yÃ¼ geri yÃ¼kleme iÅŸlevi
function restoreMenu() {
    document.getElementById('scratch-menu').style.height = '600px';
    document.getElementById('scratch-menu-header').style.borderRadius = '10px 10px 0 0';
    document.getElementById('scratch-menu-restore').style.display = 'none';
    document.getElementById('scratch-menu-minimize').style.display = 'inline-block';
}

// 'Tab' tuÅŸuna basÄ±ldÄ±ÄŸÄ±nÄ± algÄ±lamak iÃ§in olay dinleyici ekleme
document.addEventListener('keydown', function (event) {
    if (event.key === 'Tab') {
        event.preventDefault(); // TarayÄ±cÄ± varsayÄ±lan iÅŸlemi engellemek iÃ§in
        if (document.getElementById('scratch-menu').style.display === 'block') {
            closeMenu(); // MenÃ¼yÃ¼ kapatmak iÃ§in closeMenu fonksiyonunu Ã§aÄŸÄ±rÄ±n
        } else {
            openMenu(); // MenÃ¼yÃ¼ aÃ§mak iÃ§in openMenu fonksiyonunu Ã§aÄŸÄ±rÄ±n
        }
    }
});


  // MenÃ¼yÃ¼ sÃ¼rÃ¼kle ve taÅŸÄ± ve ortala
var menu = document.getElementById('scratch-menu');
var menuHeader = document.getElementById('scratch-menu-header');

menuHeader.addEventListener('mousedown', function (e) {
    isDragging = true;
    startWidth = menu.offsetWidth;
    startHeight = menu.offsetHeight;
    startOffsetX = e.clientX - menu.getBoundingClientRect().left;
    startOffsetY = e.clientY - menu.getBoundingClientRect().top;
    menu.style.transition = 'none';
});

// MenÃ¼yÃ¼ ortala
function centerMenu() {
    var screenWidth = window.innerWidth;
    var screenHeight = window.innerHeight;

    var menuWidth = menu.offsetWidth;
    var menuHeight = menu.offsetHeight;

    var centerX = (screenWidth - menuWidth) / 2;
    var centerY = (screenHeight - menuHeight) / 2;

    menu.style.left = centerX + 'px';
    menu.style.top = centerY + 'px';
}


  // MenÃ¼yÃ¼ KÃ¼Ã§Ã¼ltme Olay Dinleyici
  document.getElementById('scratch-menu-minimize').addEventListener('click', minimizeMenu);

  // MenÃ¼yÃ¼ Geri YÃ¼kleme Olay Dinleyici
  document.getElementById('scratch-menu-restore').addEventListener('click', restoreMenu);

  // MenÃ¼yÃ¼ Kapatma Olay Dinleyici
  document.getElementById('scratch-menu-close').addEventListener('click', closeMenu);

  // Arama DÃ¼ÄŸmesi TÄ±klama OlayÄ±
  document.getElementById('scratch-search-btn').addEventListener('click', function () {
    var username = document.getElementById('scratch-input').value.trim();
    var selected = document.getElementById('scratch-combo').value;
    if (username !== '' && selected !== 'none') {
      fetchData(username, selected);
    }
  });

  // Scratch API'den KullanÄ±cÄ± Verilerini AlÄ±n
  function fetchData(username, selectedOption) {
    var apiUrl = 'https://api.scratch.mit.edu/users/' + username;
    fetch(apiUrl)
      .then(function (response) {
        return response.json();
      })
      .then(function (data) {
        data = fillMissingData(data);
        switch (selectedOption) {
          case 'userinfo':
            displayUserInfo(data);
            break;
          case 'followers':
            fetchFollowers(username);
            break;
          case 'following':
            fetchFollowing(username);
            break;
          case 'projects':
            fetchProjects(username);
            break;
          case 'favorites':
            fetchFavoriteProjects(username);
            break;
          case 'explore':
            var exploreTerm = username;
            exploreProjects(exploreTerm);
            break;
          case 'studios':
            var StudiosTerm = username;
            fetchStudios(username);
            break;
          case 'search':
            var searchTerm = username;
            searchProjects(searchTerm);
            break;
          case 'search2':
            var search2Term = username;
            search2Projects(search2Term);
            break;
          case 'comments':
           fetchUserComments(username);
            break;
          case 'news':
           fetchUserNews(username);
            break;
          case 'forum':
           fetchUserForum(username);
            break;
          case 'activity':
           fetchUserActivity(username);
            break;
        }
      })
      .catch(function (error) {
        console.log('Bir hata oluÅŸtu:', error);
      });
  }

  // Eksik Verileri Doldurma
  function fillMissingData(data) {
    if (!data.hasOwnProperty('id')) {
      data.id = -1;
    }
    if (!data.hasOwnProperty('username')) {
      data.username = 'KullanÄ±cÄ± AdÄ± Yok';
    }
    if (!data.hasOwnProperty('scratchteam')) {
      data.scratchteam = false;
    }
    if (!data.hasOwnProperty('history')) {
      data.history = {
        joined: 'Tarih Bilgisi Yok'
      };
    }
    if (!data.hasOwnProperty('profile')) {
      data.profile = {
        id: -1,
        images: {
          '90x90': '',
          '60x60': '',
          '55x55': '',
          '50x50': '',
          '32x32': ''
        },
        status: 'Durum Bilgisi Yok',
        bio: 'Bio Bilgisi Yok',
        country: 'Ãœlke Bilgisi Yok'
      };
    }
    return data;
  }

   // MenÃ¼de kullanÄ±cÄ± bilgilerini gÃ¶sterme
function displayUserInfo(data) {
  // KatÄ±lma tarihini Ã¶zel bir formatta oluÅŸturun
  var joinDate = new Date(data.history.joined);
  var dayOfWeek = getDayOfWeek(joinDate.getDay()); // GÃ¼nÃ¼n adÄ±nÄ± al
  var formattedJoinDate = `${joinDate.getDate()} ${getMonthName(joinDate.getMonth())} ${dayOfWeek} ${joinDate.getFullYear()} - ${joinDate.getHours()}:${joinDate.getMinutes()}`;

  var userInfoHtml = `
    <p class="data-container" style="font-size: 20px; margin: 10px 0;"><span class="data-value">${data.username}</span></p>
    <p><img src="${data.profile.images['90x90']}" alt="Profil Resmi" style="border: 3px solid white; width: 180px; height: 180px; border-radius: 20px;"></p>
    <p class="data-container" style="font-size: 15px;"><a href="https://scratch.mit.edu/users/${data.username}/" target="_blank">â†—ï¸ Scratch'te profili aÃ§</a></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸ” Kimlik:</span><span class="data-value">${data.id}</span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸ‘¤ KullanÄ±cÄ± AdÄ±:</span><span class="data-value">${data.username}</span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸ“… KatÄ±lma Tarihi:</span><span class="data-value">${formattedJoinDate}</span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">â° Zaman:</span><span class="data-value" id="elapsed-time-${data.username}" style="font-size: 15px;"></span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸ“¬ OkunmamÄ±ÅŸ Mesajlar:</span><span class="data-value" id="unread-messages-${data.username}" style="font-size: 15px;">YÃ¼kleniyor...</span></p>
    <div class="data-followers">
      <span class="data-label" style="font-size: 15px;">â›“ï¸ TakipÃ§iler:</span>
      <span class="data-value" id="followers-count" style="font-size: 15px;">YÃ¼kleniyor...</span>
    </div>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸ“ HakkÄ±nda:</span><span class="data-value" style="font-size: 15px;">${data.profile.bio}</span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸš€ Durum:</span><span class="data-value" style="font-size: 15px;">${data.profile.status}</span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸŒ Ãœlke:</span><span class="data-value" style="font-size: 15px;">${data.profile.country}</span></p>
    <p class="data-container" style="font-size: 15px;"><span class="data-label">ğŸ® Scratch Ekibi:</span><span class="data-value" style="font-size: 15px;">${data.scratchteam ? 'Evet' : 'HayÄ±r'}</span></p>
  `;

  document.getElementById('scratch-data').innerHTML = userInfoHtml;


  // TakipÃ§i sayÄ±sÄ±nÄ± alÄ±n ve gÃ¶rÃ¼ntÃ¼leyin
  fetch("https://scratch.mit.edu/users/" + data.username + "/followers/")
    .then(x => x.text())
    .then(x => {
      const followersCount = x.split('&raquo;')[1].split('(')[1].split(')')[0];
      document.getElementById('followers-count').textContent =`${followersCount}`;
    });

  // AyÄ± isme Ã§evirme iÅŸlevi
  function getMonthName(monthNumber) {
    var months = ["Ocak", "Åubat", "Mart", "Nisan", "MayÄ±s", "Haziran", "Temmuz", "AÄŸustos", "EylÃ¼l", "Ekim", "KasÄ±m", "AralÄ±k"];
    return months[monthNumber];
  }

  // HaftanÄ±n gÃ¼nÃ¼nÃ¼n adÄ±nÄ± almak iÃ§in iÅŸlev
  function getDayOfWeek(dayNumber) {
    var days = ["Pazar", "Pazartesi", "SalÄ±", "Ã‡arÅŸamba", "PerÅŸembe", "Cuma", "Cumartesi"];
    return days[dayNumber];
  }

  // OkunmamÄ±ÅŸ mesaj sayÄ±sÄ±nÄ± alÄ±n ve gÃ¶rÃ¼ntÃ¼leyin
  fetch(`https://api.scratch.mit.edu/users/${data.username}/messages/count`)
    .then(response => response.json())
    .then(countData => {
      document.getElementById(`unread-messages-${data.username}`).textContent = countData.count;
    })
    .catch(error => {
      console.error("OkunmamÄ±ÅŸ mesaj sayÄ±sÄ± alÄ±namadÄ±:", error);
      document.getElementById(`unread-messages-${data.username}`).textContent = "Bilinmeyen Hata";
    });

  // GeÃ§en sÃ¼reyi her saniye gÃ¼ncelleme
  function updateElapsedTime() {
    const now = new Date();
    const joinedDate = new Date(data.history.joined);
    const timeDiff = now - joinedDate;

    const years = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 365));
    const months = Math.floor((timeDiff % (1000 * 60 * 60 * 24 * 365)) / (1000 * 60 * 60 * 24 * 30));
    const days = Math.floor((timeDiff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));
    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

    const elapsedTimeString = `${years} YÄ±l, ${months} Ay, ${days} GÃ¼n | ${hours} Saat, ${minutes} Dakika, ${seconds} Saniye Ã–nce KatÄ±ldÄ±.`;
    document.getElementById(`elapsed-time-${data.username}`).textContent = elapsedTimeString;
  }

  updateElapsedTime();
  setInterval(updateElapsedTime, 1000);

  // Scratch Ekibi projelerini alÄ±n ve gÃ¶rÃ¼ntÃ¼leyin
  fetch(`https://scratch.mit.edu/site-api/users/all/username/${data.username}`)
    .then(response => response.json())
    .then(projectsData => {
      var projectsHtml = '';
      projectsData.forEach(project => {
        projectsHtml += `
          <p class="data-container"><span class="data-label">ğŸ® Scratch Ekibi:</span><span class="data-value">${project.featured_project_label_name} : ${project.title}</span></p>
          <p><img src="${project.thumbnail_url}" alt="Proje Resmi" width="100"></p>
        `;
      });
      document.getElementById('scratch-projects').innerHTML = projectsHtml;
    })
    .catch(error => {
      console.error("Scratch Ekibi projeleri alÄ±namadÄ±:", error);
      document.getElementById('scratch-projects').textContent = "Bilinmeyen Hata";
    });
}

// Get and Display Scratch Team Projects
function fecthHomescratch(data) {
  fetch(`https://scratch.mit.edu/site-api/users/all/username/${data.username}`)
    .then(response => response.json())
    .then(projectsData => {
      var projectsHtml = '';
      projectsData.forEach(project => {
        projectsHtml += `
          <p class="data-container"><span class="data-label">ğŸ® Scratch Team:</span><span class="data-value">${project.featured_project_label_name} : ${project.title}</span></p>
          <p><img src="${project.thumbnail_url}" alt="Project Image" width="100"></p>
        `;
      });
      document.getElementById('scratch-projects').innerHTML = projectsHtml;
    })
    .catch(error => {
      console.error("Failed to fetch Scratch Team projects:", error);
      document.getElementById('scratch-projects').textContent = "Unknown Error";
    });
}

// KullanÄ±cÄ± YorumlarÄ±nÄ± AlÄ±n ve GÃ¶rÃ¼ntÃ¼leyin
function fetchUserComments(username) {
  fetch(`https://scratch.mit.edu/site-api/comments/user/${username}/`)
    .then(response => response.text())
    .then(userComments => {
      const userProfileComments = `
        <p class="data-container" style="font-size: 20px; margin: 20px 0 10px 0;">KullanÄ±cÄ± YorumlarÄ±</p>
        ${userComments}
      `;
      document.getElementById('scratch-data').innerHTML = userProfileComments;
    })
    .catch(error => {
      console.error("KullanÄ±cÄ± YorumlarÄ± alÄ±namadÄ±:", error);
      document.getElementById('scratch-data').textContent = "Bilinmeyen Hata";
    });
}

function fetchUserNews() {
  fetch("https://api.scratch.mit.edu/news")
    .then(response => response.json())
    .then(newsData => {
      let newsHtml = `
        <div style="display: flex; flex-wrap: wrap;">
          <div style="flex: 1 1 100%; text-align: left;">
            <h1 style="font-size: 24px; margin-bottom: 0;">Scratch News</h1>
          </div>
      `;

      newsData.forEach(news => {
        // Her haber iÃ§in bir div oluÅŸturun
        newsHtml += `
          <div style="flex: 0 0 calc(50% - 10px); margin: 5px; padding: 5px; background-color: transparent; display: flex; align-items: center;"> <!-- Arka plan ÅŸeffaf -->
            <img src="${news.image}" alt="${news.headline}" style="margin-right: 10px; width: 80px; height: 80px;">
            <div>
              <h2 style="font-size: 20px; margin: 0;">${news.headline}</h2>
              <p style="font-size: 14px; margin: 0;">${news.copy}</p>
              <p style="font-size: 14px; margin: 0;">${new Date(news.stamp).toDateString()}</p>
            </div>
          </div>
        `;
      });

      newsHtml += '</div>';
      document.getElementById('scratch-data').innerHTML = newsHtml;
    })
    .catch(error => {
      console.error("Haberler alÄ±namadÄ±:", error);
      document.getElementById('scratch-data').textContent = "Bilinmeyen Hata";
    });
}



// KullanÄ±cÄ± Aktivitelerini AlÄ±n ve GÃ¶rÃ¼ntÃ¼leyin
function fetchUserActivity(username) {
  fetch(`https://scratch.mit.edu/messages/ajax/user-activity/?user=${username}&max=1000000`)
    .then(response => response.text())
    .then(userActivity => {
      const userProfileActivity = `
          <p class="data-container" style="font-size: 20px; margin: 20px 0 10px 0;">KullanÄ±cÄ± Aktiviteleri</p>
          ${userActivity}
        </div>
      `;
      document.getElementById('scratch-data').innerHTML = userProfileActivity;
    })
    .catch(error => {
      console.error("KullanÄ±cÄ± Aktiviteleri alÄ±namadÄ±:", error);
      document.getElementById('scratch-data').textContent = "Bilinmeyen Hata";
    });
}


// KullanÄ±cÄ± Forum sitesi
function fetchUserForum(username) {
  fetch(`https://scratch.mit.edu/discuss/m/1/`)
    .then(response => response.text())
    .then(userForum => {
      const userProfileForum = `
          <style>
            .forum-container {
              border-radius: 10px; /* YumuÅŸak kenarlar */
              padding: 15px; /* Kenardan iÃ§eri boÅŸluk */
            }
            .forum-container, .forum-container * {
              color: white !important; /* TÃ¼m yazÄ±larÄ± beyaz yap */
            }
          </style>
          <div class="forum-container">
            <p class="data-container" style="font-size: 20px; margin: 20px 0 10px 0;">Scratch Forum</p>
            ${userForum}
          </div>
        </div>
      `;
      document.getElementById('scratch-data').innerHTML = userProfileForum;
    })
    .catch(error => {
      console.error("KullanÄ±cÄ± Forumu alÄ±namadÄ±:", error);
      document.getElementById('scratch-data').textContent = "Bilinmeyen Hata";
    });
}



// TakipÃ§ileri al
function fetchFollowers(username) {
  var apiUrl = 'https://api.scratch.mit.edu/users/' + username + '/followers/?limit=40&offset=1';
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      displayFollowers(data);
    })
    .catch(function (error) {
      console.log('Bir hata oluÅŸtu:', error);
    });
}
// Takip edilen kullanÄ±cÄ±larÄ± getir
function fetchFollowing(username) {
  var apiUrl = 'https://api.scratch.mit.edu/users/' + username + '/following/?limit=40&offset=1';
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (veri) {
      displayFollowing(veri);
    })
    .catch(function (hata) {
      console.log('Bir hata oluÅŸtu:', hata);
    });
}

// MenÃ¼de takipÃ§i bilgisini gÃ¶ster
function displayFollowers(veri) {
  var takipciHtml = `
    <p>TakipÃ§iler</p>
    <ul>
      ${veri.map((takipci, indeks) => `
        <li>
          <span style="font-size: 20px;">${indeks + 1}.</span>
          <img src="${takipci.profile.images['90x90']}" alt="${takipci.username}" width="50" height="50" style="vertical-align: middle; margin-right: 5px; border: 2px solid white; border-radius: 50px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);">
          <span style="font-size: 20px;">${takipci.username}</span>
          <button style="background-color: black; color: white; border: 2px solid white; border-radius: 5px; padding: 5px; margin-left: 10px;">
            <a href="https://scratch.mit.edu/users/${takipci.username}" style="text-decoration: none; color: white;">
              ğŸ”
            </a>
          </button>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = takipciHtml;
}


// Takip edilen kullanÄ±cÄ±larÄ±n bilgisini menÃ¼de gÃ¶ster
function displayFollowing(veri) {
  var takipHtml = `
    <p>Takip Edilenler</p>
    <ul>
    ${veri.map((takip, indeks) => `
     <li>
          <span style="font-size: 20px;">${indeks + 1}.</span>
          <img src="${takip.profile.images['90x90']}" alt="${takip.username}" width="50" height="50" style="vertical-align: middle; margin-right: 5px; border: 2px solid white; border-radius: 50px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);">
          <span style="font-size: 20px;">${takip.username}</span>
          <button style="background-color: black; color: white; border: 2px solid white; border-radius: 5px; padding: 5px; margin-left: 10px;">
            <a href="https://scratch.mit.edu/users/${takip.username}" style="text-decoration: none; color: white;">
              ğŸ”
            </a>
          </button>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = takipHtml;
}

// KullanÄ±cÄ±nÄ±n projelerini getir
function fetchProjects(username) {
  var apiUrl = 'https://api.scratch.mit.edu/users/' + username + '/projects/?limit=40&offset=1';
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (veri) {
      displayProjects(veri);
    })
    .catch(function (hata) {
      console.log('Bir hata oluÅŸtu:', hata);
    });
}

function displayProjects(veri) {
  var projelerHtml = `
    <p>OluÅŸturulan Projeler</p>
    <ul>
      ${veri.map(proje => `
        <li style="margin-bottom: 35px;">
          <a href="https://scratch.mit.edu/projects/${proje.id}" target="_blank" style="text-decoration: none; color: #007bff;">
            <span style="font-size: 15px;">${proje.title}</span>
          </a>
          <br>
          <a href="https://scratch.mit.edu/projects/${proje.id}" target="_blank" style="display: inline-block; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); border-radius: 5px; overflow: hidden;">
            <img src="https://uploads.scratch.mit.edu/get_image/project/${proje.id}_1000x1000.png" alt="${proje.title}" width="200" height="150" style="border: 2px solid white;">
          </a>
          <div class="data-container">
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/fav-yellow.svg" width="19" height="19"> ${proje.stats.favorites}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/love-red.svg" width="19" height="19"> ${proje.stats.loves}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/views-gray.svg" width="19" height="19"> ${proje.stats.views}      </span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ“… OluÅŸturulma Tarihi: </span>
            <span class="data-value">${formatDate(proje.history.created)}</span>
          </div>
          <div class "data-container">
            <span class="data-label">ğŸš€ PaylaÅŸÄ±lma Tarihi: </span>
            <span class="data-value">${formatDate(proje.history.shared)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ”„ GÃ¼ncelleme Tarihi: </span>
            <span class="data-value">${formatDate(proje.history.modified)}</span>
          </div>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = projelerHtml;
}

// Favori projeleri getir
function fetchFavoriteProjects(username) {
  var apiUrl = 'https://api.scratch.mit.edu/users/' + username + '/favorites';
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (veri) {
      displayFavoriteProjects(veri);
    })
    .catch(function (hata) {
      console.log('Bir hata oluÅŸtu:', hata);
    });
}

// MenÃ¼de favori projeleri gÃ¶ster
function displayFavoriteProjects(veri) {
  var favoriProjelerHtml = `
    <p>â¤ï¸ ve â­ Favori Projeler</p>
    <ul>
      ${veri.map(proje => `
        <li style="margin-bottom: 35px;">
          <a href="https://scratch.mit.edu/projects/${proje.id}" target="_blank" style="text-decoration: none; color: #007bff;">
            <span style="font-size: 15px;">${proje.title}</span>
          </a>
          <br>
          <a href="https://scratch.mit.edu/projects/${proje.id}" target="_blank" style="display: inline-block; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); border-radius: 5px; overflow: hidden;">
            <img src="https://uploads.scratch.mit.edu/get_image/project/${proje.id}_1000x1000.png" alt="${proje.title}" width="200" height="150" style="border: 2px solid white;">
          </a>
          <div class="data-container">
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/fav-yellow.svg" width="20" height="20"> ${proje.stats.favorites}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/love-red.svg" width="20" height="20"> ${proje.stats.loves}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/views-gray.svg" width="20" height="20"> ${proje.stats.views}      </span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ“… OluÅŸturulma Tarihi: </span>
            <span class="data-value">${formatDate(proje.history.created)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸš€ PaylaÅŸÄ±lma Tarihi: </span>
            <span class="data-value">${formatDate(proje.history.shared)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ”„ GÃ¼ncelleme Tarihi: </span>
            <span class="data-value">${formatDate(proje.history.modified)}</span>
          </div>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = favoriProjelerHtml;
}

// Tarihi biÃ§imlendirme
function formatDate(tarihDizesi) {
  var tarih = new Date(tarihDizesi);
  var biÃ§imlendirilmiÅŸTarih = ('0' + tarih.getDate()).slice(-2) + '.' + ('0' + (tarih.getMonth() + 1)).slice(-2) + '.' + tarih.getFullYear() + ' - ' + ('0' + tarih.getHours()).slice(-2) + ':' + ('0' + tarih.getMinutes()).slice(-2);
  return biÃ§imlendirilmiÅŸTarih;
}

// Projeleri ara
function searchProjects(aramaTerimi) {
  var apiUrl = 'https://api.scratch.mit.edu/search/projects?q=%23=' + aramaTerimi;
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (veri) {
      displaySearchResults(veri);
    })
    .catch(function (hata) {
      console.log('Bir hata oluÅŸtu:', hata);
    });
}

// MenÃ¼de arama sonuÃ§larÄ±nÄ± gÃ¶ster
function displaySearchResults(veri) {
  var aramaSonuÃ§larÄ±Html = `
    <p>Scratch PopÃ¼ler Arama SonuÃ§larÄ±</p>
    <ul>
      ${veri.map(sonuÃ§ => `
        <li style="margin-bottom: 35px;">
          <a href="https://scratch.mit.edu/projects/${sonuÃ§.id}" target="_blank" style="text-decoration: none; color: #afdafc;">
            <div style="display: flex; align-items: center;"> <!-- KullanÄ±cÄ±nÄ±n fotoÄŸrafÄ±nÄ± ve oluÅŸturanÄ± iÃ§eren esnek konteynÄ±r -->
              <img src="https://uploads.scratch.mit.edu/get_image/user/${sonuÃ§.author.id}_90x90.png" alt="${sonuÃ§.author.username}" width="40" height="40" style="border-radius: 30%; margin-right: 5px;">
              <div>
                <a href="https://scratch.mit.edu/users/${sonuÃ§.author.username}" target="_blank" style="font-size: 15px; color: #007bff; text-decoration: underline;">${sonuÃ§.author.username}</a>
                <br>
                <span style="font-size: 15px;">${sonuÃ§.title}</span>
              </div>
            </div>
          </a>
          <a href="https://scratch.mit.edu/projects/${sonuÃ§.id}" target="_blank" style="display: inline-block; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); border-radius: 5px; overflow: hidden;">
            <img src="https://uploads.scratch.mit.edu/get_image/project/${sonuÃ§.id}_1000x1000.png" alt="${sonuÃ§.title}" width="200" height="150" style="border: 2px solid white;">
          </a>
          <div class="data-container">
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/fav-yellow.svg" width="20" height="20"> ${sonuÃ§.stats.favorites}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/love-red.svg" width="20" height="20"> ${sonuÃ§.stats.loves}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/views-gray.svg" width="20" height="20"> ${sonuÃ§.stats.views}      </span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ“… OluÅŸturulma Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.created)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸš€ PaylaÅŸÄ±lma Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.shared)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ”„ GÃ¼ncelleme Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.modified)}</span>
          </div>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = aramaSonuÃ§larÄ±Html;
}

// Trend projeleri ara
function search2Projects(arama2Terimi) {
  var apiUrl = 'https://api.scratch.mit.edu/search/projects?mode=trending&q=' + arama2Terimi;
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (veri) {
      displaySearch2Results(veri);
    })
    .catch(function (hata) {
      console.log('Bir hata oluÅŸtu:', hata);
    });
}

// Trending arama sonuÃ§larÄ±nÄ± menÃ¼de gÃ¶ster
function displaySearch2Results(veri) {
  var arama2SonuÃ§larÄ±Html = `
    <p>Scratch Trending Arama SonuÃ§larÄ±</p>
    <ul>
      ${veri.map(sonuÃ§ => `
        <li style="margin-bottom: 35px;">
          <a href="https://scratch.mit.edu/projects/${sonuÃ§.id}" target="_blank" style="text-decoration: none; color: #afdafc;">
            <div style="display: flex; align-items: center;"> <!-- KullanÄ±cÄ±nÄ±n fotoÄŸrafÄ±nÄ± ve oluÅŸturanÄ± iÃ§eren esnek konteynÄ±r -->
              <img src="https://uploads.scratch.mit.edu/get_image/user/${sonuÃ§.author.id}_90x90.png" alt "${sonuÃ§.author.username}" width="40" height="40" style="border-radius: 30%; margin-right: 5px;">
              <div>
                <a href="https://scratch.mit.edu/users/${sonuÃ§.author.username}" target="_blank" style="font-size: 15px; color: #007bff; text-decoration: underline;">${sonuÃ§.author.username}</a>
                <br>
                <span style="font-size: 15px;">${sonuÃ§.title}</span>
              </div>
            </div>
          </a>
          <a href="https://scratch.mit.edu/projects/${sonuÃ§.id}" target="_blank" style="display: inline-block; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); border-radius: 5px; overflow: hidden;">
            <img src="https://uploads.scratch.mit.edu/get_image/project/${sonuÃ§.id}_1000x1000.png" alt="${sonuÃ§.title}" width="200" height="150" style="border: 2px solid white;">
          </a>
          <div class "data-container">
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/fav-yellow.svg" width="20" height="20"> ${sonuÃ§.stats.favorites}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/love-red.svg" width="20" height="20"> ${sonuÃ§.stats.loves}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/views-gray.svg" width="20" height="20"> ${sonuÃ§.stats.views}      </span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ“… OluÅŸturulma Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.created)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸš€ PaylaÅŸÄ±lma Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.shared)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ”„ GÃ¼ncelleme Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.modified)}</span>
          </div>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = arama2SonuÃ§larÄ±Html;
}

// Projeleri keÅŸfet
function exploreProjects(aramaTerimi) {
  var apiUrl = 'https://api.scratch.mit.edu/explore/projects?limit=40&offset=0&language=Turkey&mode=trending&q=*';
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (veri) {
      exploreProjectsResults(veri);
    })
    .catch(function (hata) {
      console.log('Bir hata oluÅŸtu:', hata);
    });
}

// Uzun proje baÅŸlÄ±klarÄ±nÄ± kÄ±rpma iÅŸlevi
function truncateTitle(baÅŸlÄ±k, maksimumUzunluk) {
  return baÅŸlÄ±k.length > maksimumUzunluk ? baÅŸlÄ±k.slice(0, maksimumUzunluk - 3) + '...' : baÅŸlÄ±k;
}

// MenÃ¼de keÅŸif sonuÃ§larÄ±nÄ± gÃ¶ster
function exploreProjectsResults(veri) {
  var keÅŸifSonuÃ§larÄ±Html = `
    <p>Scratch KeÅŸfet</p>
    <ul>
      ${veri.map(sonuÃ§ => `
        <li style="margin-bottom: 35px;">
          <a href="https://scratch.mit.edu/projects/${sonuÃ§.id}" target="_blank" style="text-decoration: none; color: #afdafc;">
            <div style="display: flex; align-items: center;"> <!-- KullanÄ±cÄ±nÄ±n fotoÄŸrafÄ±nÄ± ve oluÅŸturanÄ± iÃ§eren esnek konteynÄ±r -->
              <img src="https://uploads.scratch.mit.edu/get_image/user/${sonuÃ§.author.id}_90x90.png" alt="${sonuÃ§.author.username}" width="40" height="40" style="border-radius: 30%; margin-right: 5px;">
              <div>
                <a href="https://scratch.mit.edu/users/${sonuÃ§.author.username}" target="_blank" style="font-size: 15px; color: #007bff; text-decoration: underline;">${sonuÃ§.author.username}</a>
                <br>
                <span style="font-size: 15px;">${truncateTitle(sonuÃ§.title, 14)}</span>
              </div>
            </div>
          </a>
          <a href="https://scratch.mit.edu/projects/${sonuÃ§.id}" target="_blank" style="display: inline-block; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); border-radius: 5px; overflow: hidden;">
            <img src="https://uploads.scratch.mit.edu/get_image/project/${sonuÃ§.id}_1000x1000.png" alt="${sonuÃ§.title}" width="200" height="150" style="border: 2px solid white;">
          </a>
          <div class="data-container">
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/fav-yellow.svg" width="20" height="20"> ${sonuÃ§.stats.favorites}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/love-red.svg" width="20" height="20"> ${sonuÃ§.stats.loves}      </span>
            <span class="data-label"><img src="https://scratch.mit.edu/svgs/project/views-gray.svg" width="20" height="20"> ${sonuÃ§.stats.views}      </span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ“… OluÅŸturulma Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.created)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸš€ PaylaÅŸÄ±lma Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.shared)}</span>
          </div>
          <div class="data-container">
            <span class="data-label">ğŸ”„ GÃ¼ncelleme Tarihi: </span>
            <span class="data-value">${formatDate(sonuÃ§.history.modified)}</span>
          </div>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = keÅŸifSonuÃ§larÄ±Html;
}

// KullanÄ±cÄ±nÄ±n stÃ¼dyolarÄ±nÄ± getir
function fetchStudios(username) {
  var apiUrl = `https://api.scratch.mit.edu/users/${username}/studios/curate`;
  fetch(apiUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      displayStudios(data);
    })
    .catch(function (error) {
      console.log('Bir hata oluÅŸtu:', error);
    });
}

function displayStudios(data) {
  var studiosHtml = `
    <p>OlduÄŸu StÃ¼dyolar</p>
    <ul>
      ${data.map(studio => `
        <li style="margin-bottom: 35px;">
          <a href="https://scratch.mit.edu/studios/${studio.id}" target="_blank" style="text-decoration: none; color: #007bff;">
            <span style="font-size: 15px;">${studio.title}</span>
          </a>
          <br>
          <a href="https://scratch.mit.edu/studios/${studio.id}" target="_blank" style="display: inline-block; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); border-radius: 5px; overflow: hidden;">
            <img src="${studio.image}" alt="${studio.title}" width="200" height="150" style="border: 2px solid white;">
          </a>
        </li>
      `).join('')}
    </ul>
  `;
  document.getElementById('scratch-data').innerHTML = studiosHtml;
}


// MenÃ¼yÃ¼ temizle
function clearMenu() {
  document.getElementById('scratch-data').innerHTML = '';
}

// TakipÃ§iler butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('followers-button').addEventListener('click', function () {
  var kullaniciAdi = document.getElementById('username').value;
  clearMenu();
  fetchFollowers(kullaniciAdi);
});

// Takip edilenler butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('following-button').addEventListener('click', function () {
  var kullaniciAdi = document.getElementById('username').value;
  clearMenu();
  fetchFollowing(kullaniciAdi);
});

// Projeler butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('projects-button').addEventListener('click', function () {
  var kullaniciAdi = document.getElementById('username').value;
  clearMenu();
  fetchProjects(kullaniciAdi);
});

// Favori projeler butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('favorite-projects-button').addEventListener('click', function () {
  var kullaniciAdi = document.getElementById('username').value;
  clearMenu();
  fetchFavoriteProjects(kullaniciAdi);
});

// Arama butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('search-button').addEventListener('click', function () {
  var aramaTerimi = document.getElementById('search-term').value;
  clearMenu();
  searchProjects(aramaTerimi);
});

// Trending arama butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('search2-button').addEventListener('click', function () {
  var arama2Terimi = document.getElementById('search2-term').value;
  clearMenu();
  search2Projects(arama2Terimi);
});

// KeÅŸfet butonuna tÄ±klandÄ±ÄŸÄ±nda
document.getElementById('explore-button').addEventListener('click', function () {
  clearMenu();
  exploreProjects();
});

})();
